<button class="back-to-top" id="scrollToTopBtn" title="Back to top">
  <svg
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
  >
    <path d="M18 15l-6-6-6 6"></path>
  </svg>
</button>

<script>
  class ScrollToTop {
    constructor() {
      this.button = document.getElementById('scrollToTopBtn');
      this.footer = document.querySelector('.footer');
      this.init();
    }

    init() {
      if (!this.button) return;
      this.button.addEventListener('click', () => this.scrollToTop());

      window.addEventListener('scroll', () => {
        this.toggleVisibility();
        this.adjustForFooter();
      });

      this.toggleVisibility();
      this.adjustForFooter();
    }

    scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth',
      });
    }

    toggleVisibility() {
      if (!this.button) return;
      if (window.scrollY > 300) {
        this.button.classList.add('show');
      } else {
        this.button.classList.remove('show');
      }
    }

    adjustForFooter() {
      if (!this.button || !this.footer) return;
      const footerRect = this.footer.getBoundingClientRect();
      const windowHeight = window.innerHeight;
      // If the footer is visible in the viewport
      if (footerRect.top < windowHeight && footerRect.bottom > 0) {
        this.button.classList.add('above-footer');
      } else {
        this.button.classList.remove('above-footer');
      }
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    new ScrollToTop();
  });
</script>
